###由于人间地狱游戏的U18版本更新了新的RCON协议，本项目已失效

### 项目概述

这个项目 `HLL_Server_Command_Tool` 是一个专门为游戏 __《人间地狱》(Hell Let Loose)__ 设计的远程管理工具。它允许服务器管理员通过一个简单的命令行界面，连接到游戏服务器并执行各种管理命令，例如更换地图、踢出玩家、发送广播消息等。

### 主要核心

1. __RCON 协议__: RCON (Remote Console) 是一种标准协议，用于远程执行服务器命令。
2. __XOR 加密__: 《人间地狱》的 RCON 协议增加了一层安全措施，所有通信都必须使用服务器在连接时提供的一个动态密钥进行 __XOR 加密__。这个工具正确地实现了这个加密/解密流程。
3. __Python `socket`__: 使用 Python 内置的 `socket` 库来建立底层的 TCP 网络连接。
4. __`.env` 文件__: 通过 `python-dotenv` 库，脚本可以从 `.env` 文件中安全地加载服务器地址、端口和密码，避免将这些敏感信息硬编码在代码里。

### 文件结构和作用

- `README.md`: 项目的说明文档，解释了项目的功能、如何安装和使用。
- `LICENSE`: MIT 许可证，说明了代码的开源使用条款。
- `.env` / `example.env`: 配置文件。`example.env` 是一个模板，用户需要复制它并重命名为 `.env`，然后填入自己的服务器信息。
- `hll_rcon_console.py`: 项目的核心代码，我已经为它添加了中文的注释与命令文档。

### `hll_rcon_console.py` 脚本工作流程

1. __加载配置__: 脚本启动时，首先会尝试从 `.env` 文件加载 `RCON_HOST`, `RCON_PORT`, 和 `RCON_PASSWORD`。
2. __建立连接__:
   
   - `XOR_RCON` 类被实例化。
   - 调用 `connect()` 方法，与游戏服务器建立 TCP 连接。
   - 连接成功后，服务器会立刻发送一个一次性的 __XOR 密钥__，脚本会保存这个密钥用于后续通信。
3. __登录授权__:
   
   - 连接建立后，必须发送 `Login <password>` 命令进行身份验证。
   - 脚本使用 `send()` 方法，该方法会自动用之前收到的密钥加密命令，然后发送出去。
4. __接收响应__:
   
   - `send()` 方法在发送命令后，会调用 `receive()` 方法等待服务器的响应。
   - `receive()` 方法收到的也是加密数据，它会使用相同的 XOR 密钥进行解密，然后返回可读的文本。
5. __交互循环__:
   
   - 登录成功后，脚本进入一个无限循环，等待用户输入命令。
   - 用户输入 `help` 可以查看所有可用命令。
   - 用户输入 `exit` 可以关闭连接并退出程序。
   - 用户输入的任何其他命令都会被加密发送到服务器，并将解密后的响应打印在控制台上。
6. __关闭连接__: 程序退出时（无论是正常退出还是发生错误），`finally` 块会确保 `rcon.close()` 方法被调用，从而优雅地断开与服务器的连接。

总的来说，这是一个结构清晰、功能专一的实用工具。通过阅读和注释代码，我们了解了它如何与《人间地狱》服务器进行安全的加密通信。

## 用法

安装Python 3.7 或更高版本
[Python3 环境搭建 | 菜鸟教程](https://www.runoob.com/python3/python3-install.html)

安装脚本所需依赖：

```
pip install python-dotenv
```

复制配置文件并修改名称

example.env`是一个模板，用户需要复制它并重命名为` **.env**，然后根据格式填入自己的服务器信息。



运行脚本：

```
Python hll_rcon_console.py
```

启动时，该工具会自动连接并提示输入命令。

### 可用命令

登录后键入 'help' 以显示所有可用命令的详细列表，例如：

- 服务器管理 - 地图处理 - 玩家管理 - 管理和封禁管理 - 服务器配置

## 调试

控制台输出加密和解密的命令详细信息，以便于调试和验证。

## 贡献

请随意提出问题或提交拉取请求以增强功能。

## 许可证

该项目在 MIT 许可证下可用。有关详细信息  ，请参阅 [LICENSE]（LICENSE）

## 更新计划

* 1、由于未知问题导致若长时间未给服务器发送指令会导致连接断开，后续将尝试每隔1分钟发送登陆指令以防止断开连接
* 2、添加Web 图形化界面
* 3、新增更多自动化功能，例如快速部署、击杀查询、玩家积分等丰富功能(目前仅打算开源基础内容学习交流)
* 4、更多计划正在开发中
  **如果你有不错的想法欢迎[Create new issue](https://github.com/cn-maomao/HLL_Server_Command_Tool/issues/new)**


